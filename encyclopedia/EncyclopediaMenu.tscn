[gd_scene load_steps=4 format=2]

[ext_resource path="res://encyclopedia/EntryButton.tscn" type="PackedScene" id=1]
[ext_resource path="res://media/ogre.png" type="Texture" id=2]

[sub_resource type="GDScript" id=1]

script/source = "extends MarginContainer

export (PackedScene) var entry_button

func _ready():
	var entry_list = get_all_entries()
	
	for entry in entry_list:
		var new_button = entry_button.instance()
		$VBoxContainer/EntryList.add_child(new_button)
		
		new_button.entry = entry
		new_button.connect(\"entry_selected\", self, \"load_entry\")
		
func load_entry(entry):
	$VBoxContainer/BottomRow/LeftColumn/EntryImage.texture 	= entry.image
	$VBoxContainer/BottomRow/LeftColumn/EntryTitle.text 	= entry.title 
	$VBoxContainer/BottomRow/EntryDescription.text 			= entry.description

func get_all_entries():
	var directory = Directory.new()
	directory.open(\"res://encyclopedia/entries\")
	directory.list_dir_begin()
	
	var results = []
	
	var filename = directory.get_next()
	
	while filename != \"\":
		var loaded_file = load(\"res://encyclopedia/entries/\" + filename)
		
		if loaded_file:
			results.append(loaded_file)
		filename = directory.get_next()
		
	return results
	
"
_sections_unfolded = [ "Resource" ]

[node name="Menu" type="MarginContainer" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 226.0
margin_bottom = 218.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 3
size_flags_vertical = 3
script = SubResource( 1 )
_sections_unfolded = [ "Grow Direction", "Margin", "Size Flags" ]
entry_button = ExtResource( 1 )

[node name="VBoxContainer" type="VBoxContainer" parent="." index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 8.0
margin_right = 226.0
margin_bottom = 218.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
alignment = 0

[node name="EntryList" type="GridContainer" parent="VBoxContainer" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 218.0
margin_bottom = 100.0
rect_min_size = Vector2( 0, 100 )
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 3
size_flags_vertical = 3
columns = 5
_sections_unfolded = [ "Rect", "Size Flags" ]

[node name="BottomRow" type="HBoxContainer" parent="VBoxContainer" index="1"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 104.0
margin_right = 218.0
margin_bottom = 218.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
alignment = 0

[node name="LeftColumn" type="VBoxContainer" parent="VBoxContainer/BottomRow" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 64.0
margin_bottom = 114.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
alignment = 0

[node name="EntryImage" type="TextureRect" parent="VBoxContainer/BottomRow/LeftColumn" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 64.0
margin_bottom = 96.0
rect_min_size = Vector2( 50, 50 )
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 2 )
stretch_mode = 0
_sections_unfolded = [ "Rect" ]

[node name="EntryTitle" type="Label" parent="VBoxContainer/BottomRow/LeftColumn" index="1"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_top = 100.0
margin_right = 64.0
margin_bottom = 114.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 2
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 4
text = "Lorem"
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="EntryDescription" type="RichTextLabel" parent="VBoxContainer/BottomRow" index="1"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 68.0
margin_right = 218.0
margin_bottom = 114.0
rect_min_size = Vector2( 150, 0 )
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = true
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
bbcode_enabled = false
bbcode_text = ""
visible_characters = -1
percent_visible = 1.0
meta_underlined = true
tab_size = 4
text = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
scroll_active = true
scroll_following = false
selection_enabled = false
override_selected_font_color = false
_sections_unfolded = [ "Rect" ]


